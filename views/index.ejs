<%- include('partials/head.ejs') %>

<%- include('partials/nav.ejs') %>


<div style="padding:80px ;" class="container">
    <hr>
    <h2>CRUD Database</h2>   
    <a class="btn btn-success" href="/new">Criar novo Usuario</a>
    <hr>

    <table class="table table-bordered ">
        <thead>
            <tr>
                <th>Id</th>
                <th>Nome</th>
                <th>Sobrenome</th>  
                <th>E-mail</th>                                         
                <th>Telefone</th>
            </tr>
        </thead>

        <tbody>
         
            <% categories.forEach(category =>{ %>
                <tr>
                    <th><%= category.id %> </th>
                    <th><%= category.nome %> </th>
                    <th><%= category.sobrenome %> </th>
                    <th><%= category.email %></th>
                    <th><%= category.telefone %></th>
                   
                  
                    <th>

                        <a href="/edit/<%= category.id %>" class="btn btn-warning">Editar</a>
                        <form method="post" action="/categories/delete" style="display:inline ; " onsubmit="confirmarDelecao(event, this)">
                        <input type="hidden" name="id" value="<%- category.id %>">
                        <button class="btn btn-danger">Deletar</button>
                        </form>
                        
                        
                    </th>
                </tr>
            <%}) %>

        </tbody>
    </table>

</div>


<%- include('partials/footer.ejs') %>

<script>
    function confirmarDelecao(event, form){
        event.preventDefault();
        var decision = confirm('VocÃª quer deletar esta categoria');
        if(decision){
            form.submit();
        }else{
            console.log('nao')
        }
}   
</script>
